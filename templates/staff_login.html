{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center mt-5">
    <div class="col-md-6 col-lg-4">
        <div class="card shadow-lg border-0 rounded-lg">
            <div class="card-header bg-primary text-white text-center py-4">
                <h3 class="font-weight-light my-1">Staff Login</h3>
            </div>
            <div class="card-body p-4">
                <form method="POST" novalidate>
                    <div class="form-group mb-3">
                        <label class="small mb-1" for="role">Role</label>
                        <select class="form-control" name="role" id="role" onchange="toggleInputs()">
                            <option value="pantryHead">Pantry Head</option>
                            <option value="teaManager">Tea Manager</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group mb-3" id="emailInput">
                        <label class="small mb-1" for="email">Email</label>
                        <input class="form-control" name="email" id="email" type="email" placeholder="Enter email address" />
                    </div>
                    <div class="form-group mb-3 d-none" id="usernameInput">
                        <label class="small mb-1" for="username">Username</label>
                        <input class="form-control" name="username" id="username" type="text" placeholder="Enter admin username" />
                        <div class="form-text">Admin uses username login (default: <code>Administrator</code>).</div>
                    </div>
                    <div class="form-group mb-3">
                        <label class="small mb-1" for="password">Password</label>
                        <input class="form-control" name="password" type="password" placeholder="Enter password" required />
                    </div>
                    <div class="form-group d-flex align-items-center justify-content-between mt-4 mb-0">
                        <button type="submit" class="btn btn-primary btn-block w-100 py-2">Login</button>
                    </div>
                </form>
            </div>
            <div class="card-footer text-center py-3">
                <div class="small text-muted">
                    Member? <a href="{{ url_for('login') }}">Login here</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function toggleInputs() {
    const role = document.getElementById('role').value;
    const emailInput = document.getElementById('emailInput');
    const usernameInput = document.getElementById('usernameInput');
    const emailField = document.getElementById('email');
    const usernameField = document.getElementById('username');
    
    if (role === 'admin') {
        emailInput.classList.add('d-none');
        usernameInput.classList.remove('d-none');
        emailField.required = false;
        emailField.disabled = true;
        emailField.value = '';
        usernameField.required = true;
        usernameField.disabled = false;
    } else {
        emailInput.classList.remove('d-none');
        usernameInput.classList.add('d-none');
        emailField.required = true;
        emailField.disabled = false;
        usernameField.required = false;
        usernameField.disabled = true;
        usernameField.value = '';
    }
}
toggleInputs();
</script>
{% endblock %}
